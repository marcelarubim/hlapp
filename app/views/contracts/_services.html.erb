<div class="card" id="object-service-<%= @id || ff.object.id %>">

  <%= render partial: 'shared/colapse_header', locals: {ff: ff, id: @id || ff.object.id, class_name: 'service' } %>

  <div id="collapse-service-<%= @id || ff.object.id %>" class="collapse <%= "show" if ff.object.new_record? %>">
    <div class="card-block">
      <div class="form-group row">
        <label class="col-sm-2" for="">Courtesy: </label>
        <div class="col-sm-2"><%= ff.select :courtesy, Service.courtesies.keys.map {|c| [c.titleize,c]}, selected: ff.object.courtesy, include_blank: true %></div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2" for="">Service: </label>
        <div class="col-sm-2"><%= select_tag "service-type-#{@id || ff.object.id}", options_from_collection_for_select(ServiceProductVariation.service_types, "id", "name", selected: ff.object&.service_type), "data-id": ff.object.new_record? ? @id : ff.object.id, "data-type": "service", "data-target": "product", include_blank: true %></div>
        <label class="col-sm-2" for="">Product: </label>
        <div class="col-sm-2"><%= select_tag "product-type-#{ff.object.new_record? ? @id : ff.object.id}", options_from_collection_for_select(ProductType.all, "id", "name", selected: ff.object&.product_type), "data-id": @id || ff.object.id, "data-type": "product", "data-target": "variation", include_blank: true %></div>
        <label class="col-sm-2" for="">Variation: </label>
        <div class="col-sm-2"><%= ff.collection_select :service_product_variation_id, ServiceProductVariation.all, :id, :id, {include_blank: true}, {"data-id": @id || ff.object.id, "data-type": "variation"} %></div>
      </div>
    </div>
      <div class="card-block">
        <p class="mt-3">Productions:</p>
        <div id="production-container-<%= @id || ff.object.id %>">
          <%= ff.fields_for :productions, ff.object.productions do |f| %>
            <%= render partial: "contracts/production", locals: {ff: f} %>
          <% end %>
        </div>
        <%= link_to_add_fields("New production", ff, 'productions', 'contracts/production', {target: "production-container-#{@id || ff.object.id}"}) %>
      </div>
    <% unless ff.object.new_record? %>
    <% end %>
  </div>
</div>
